{
	name: update-files
	config: {
		stream-factory: file
		tika: {}
		source: {
		    type: elasticsearch
		    query: {

		    }
		}
		tasks: [
		    {
		        type: pipeline
		        name: main-pipeline
		        tasks: [
		            {
		                type: basic-file-properties
		                name: basic-file-properties
						schemes: [ "elasticsearch" ]
		            },
					{
						type: barrier
						name: parse-barrier
						condition: date-or-size-modification
						task: {
							type: pipeline
		        			name: parse-pipeline
							tasks: [
								{
								    type: parse
								    name: parse
								    parsed-storage-strategy: {
								        type: file
								        suffix: .txt
								        root: temporary-folder
								    }
								    embedded-storage-strategy: {
								        type: file
								        suffix: .tmp
								        root: temporary-folder
								    }
								},
								{
								    type: elasticsearch-fragment-sink
								    name: elasticsearch-sink
								    fragment-size: 1000
								    fragment-overlap: 50
								    flush: {
								        min-actions: 0
								        min-bytes: 0
								        max-actions: 1000
								        max-bytes: 10000000
								    }
						            elasticsearch-client: provided
									index: ${params.index}
								}
							]
						}
					}
		        ]
		    }
		]
	}
}
